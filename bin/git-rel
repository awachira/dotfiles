#!/usr/bin/env ruby
# vim:set ft=ruby

def yellow s; "\033[33m#{s}\033[0m" end
def cyan s; "\033[36m#{s}\033[0m" end

`git fetch`

highlighted = 0
`git branch -v`.split("\n").each do |line|
  match = /(.*)(behind|ahead) ([0-9])+(.*)/.match(line)
  next unless match
  highlighted += 1
  color = (match[2] == "behind") ? :yellow : :cyan
  puts match[1] + send(color, match[2] + " " + match[3]) + match[4]
end

puts "Fully synced!" if highlighted.zero?
